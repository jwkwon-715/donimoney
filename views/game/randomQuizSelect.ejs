<h1>랜덤 모드 커리큘럼 고르기</h1>

<form id="curriculumList" method="post" action="/game/school/quiz/select">
  <input type="hidden" name="type" value="random">

  <% curriculumList.forEach(curriculum => { %>
    <% 
      const isUnlocked = learningProgressList.some(function(progress) {
        return progress.learning_id === curriculum.curriculum_id;
      });
    %>
    <div>
      <label>
        <input
          type="checkbox"
          name="curriculumList"
          value="<%= curriculum.curriculum_id %>"
          <% if (!isUnlocked) { %> disabled <% } %>
        >

        <%= curriculum.curriculum_title %>
        <% if (!isUnlocked) { %>
          <span style="color: #aaa;">(잠김)</span>
        <% } %>

      </label>
    </div>
  <% }) %>

  <button type="submit">랜덤 문제 풀기</button>
</form>

<p id="error-message" style="color: red;"></p>

<script>
  document.getElementById('curriculumList').addEventListener('submit', function(e) {
    // 잠긴(비활성화된) 체크박스는 선택되지 않으므로, 그냥 기존 로직 사용
    const checked = document.querySelectorAll('input[name="curriculumList"]:checked');
    if (checked.length < 3 || checked.length > 5) {
      e.preventDefault();
      document.getElementById('error-message').textContent = '3개 이상 5개 이하로 선택 가능';
    }
  });
</script>
